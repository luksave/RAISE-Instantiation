<!DOCTYPE html>
<html lang="en">
<head>
<title>JavaScript - read JSON from URL</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
 <script>
   	   
 $(function() {
   setTime();
   function setTime() {
      var date = new Date().getTime();
      //var string = "Timestamp: "+date;
	
		//Adicionar cdg para atualizar
	fetch('https://api.thingspeak.com/channels/869608/feeds/last.json?api_key=GQK8L914F22F2B1H')
	.then(response => response.json())
	.then(data => {
		
		//co2
		if (data.field5 <= 1000) {
			document.getElementById("co2").style.color = '#08298A';
			document.getElementById("co2").innerHTML = Math.trunc(data.field5) +" ppm";
		}
		if (data.field5 >= 1000) {
			document.getElementById("co2").style.color = 'red';		
			document.getElementById("co2").innerHTML = Math.trunc(data.field5) +" ppm";
		}
		
		//tovc
		if (data.field4 < 250) {
			document.getElementById("tvoc").style.color = '#08298A';
			document.getElementById("tvoc").innerHTML = Math.trunc(data.field4) +" ppb";
		}
		if (data.field4 >= 250) {
			document.getElementById("tvoc").style.color = 'red';		
			document.getElementById("tvoc").innerHTML = Math.trunc(data.field4) +" ppb";
		}
				
		//umidade		
		if (data.field2 <= 65) {
		document.getElementById("umidade").style.color = '#08298A';
		document.getElementById("umidade").innerHTML = Math.trunc(data.field2)+"%";
		}
		if (data.field2 >= 66) {
		document.getElementById("umidade").style.color = 'red';
		document.getElementById("umidade").innerHTML = Math.trunc(data.field2)+"%";
		}
		
		//temperatura
		if (data.field1 < 37) {
		document.getElementById("temperatura").style.color = '#08298A';
		document.getElementById("temperatura").innerHTML = Math.trunc(data.field1) +" °C";
		
		}
		if (data.field1 >= 37) {
		document.getElementById("temperatura").style.color = 'red';
		document.getElementById("temperatura").innerHTML = Math.trunc(data.field1) +" °C";
		}
	})
	.catch(error => console.error(error))

		
		//fim cdg atualizar

    setTimeout(setTime, 15000);
      $('#setTime').html(string);
   
   }
 });
	
	</script>
</head>
</script>

<body>
<center>
<div class="total">
	<div class="div-float">
		<h1 id="co2" style="text-align:center"></h1>
			<p class="div-texto" style="text-align:center">Dióxido de Carbono</p>
		
	</div>

	<div class="div-float">
		<h1 id="temperatura" style="text-align:center"></h1>
		<p  class="div-texto" style="text-align:center">Temperatura</p>	

	</div>
	<div class="div-float">
		<h1 id="umidade" style="text-align:center"></h1>
		<p  class="div-texto" style="text-align:center">Umidade</p>		

	</div>
	<div class="div-float">
		<h1 id="tvoc" style="text-align:center"></h1>
		<p  class="div-texto" style="text-align:center">TVOC</p>

	</div>

</div>
</center>
</body>

<style rel="stylesheet" type="text/css">
.div-float{
	display: inline-block;
	width: auto;
	border: 0px solid #08298A;
	padding: 5px;
	margin: 4px;
}

.div-texto{
	  font-size:20px;
	  color: #08298A;
}

.div-clear {
	clear: center;
}



</style>
</html>
